/**
 * Short version for minified scripts:
 *
 * The MIT License (MIT)
 * Copyright (c) 2022 Espen Klem
 *
 * Full license text + Third party licenses found in ./LICENSES.txt
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).gsh={})}(this,(function(e){"use strict";const t="0123456789bcdefghjkmnpqrstuvwxyz";class n{static encode(e,a,o){if(void 0===o){for(let t=1;t<=12;t++){const o=n.encode(e,a,t),s=n.decode(o);if(s.lat==e&&s.lon==a)return o}o=12}if(e=Number(e),a=Number(a),o=Number(o),isNaN(e)||isNaN(a)||isNaN(o))throw new Error("Invalid geohash");let s=0,r=0,c=!0,d="",h=-90,i=90,f=-180,l=180;for(;d.length<o;){if(c){const e=(f+l)/2;a>=e?(s=2*s+1,f=e):(s*=2,l=e)}else{const t=(h+i)/2;e>=t?(s=2*s+1,h=t):(s*=2,i=t)}c=!c,5==++r&&(d+=t.charAt(s),r=0,s=0)}return d}static decode(e){const t=n.bounds(e),a=t.sw.lat,o=t.sw.lon,s=t.ne.lat,r=t.ne.lon;let c=(a+s)/2,d=(o+r)/2;return c=c.toFixed(Math.floor(2-Math.log(s-a)/Math.LN10)),d=d.toFixed(Math.floor(2-Math.log(r-o)/Math.LN10)),{lat:Number(c),lon:Number(d)}}static bounds(e){if(0==e.length)throw new Error("Invalid geohash");e=e.toLowerCase();let n=!0,a=-90,o=90,s=-180,r=180;for(let c=0;c<e.length;c++){const d=e.charAt(c),h=t.indexOf(d);if(-1==h)throw new Error("Invalid geohash");for(let e=4;e>=0;e--){const t=h>>e&1;if(n){const e=(s+r)/2;1==t?s=e:r=e}else{const e=(a+o)/2;1==t?a=e:o=e}n=!n}}return{sw:{lat:a,lon:s},ne:{lat:o,lon:r}}}static adjacent(e,a){if(e=e.toLowerCase(),a=a.toLowerCase(),0==e.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(a))throw new Error("Invalid direction");const o=e.slice(-1);let s=e.slice(0,-1);const r=e.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[a][r].indexOf(o)&&""!=s&&(s=n.adjacent(s,a)),s+t.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[a][r].indexOf(o))}static neighbours(e){return{n:n.adjacent(e,"n"),ne:n.adjacent(n.adjacent(e,"n"),"e"),e:n.adjacent(e,"e"),se:n.adjacent(n.adjacent(e,"s"),"e"),s:n.adjacent(e,"s"),sw:n.adjacent(n.adjacent(e,"s"),"w"),w:n.adjacent(e,"w"),nw:n.adjacent(n.adjacent(e,"n"),"w")}}}function a(e){return e*(Math.PI/180)}e.Geohash=n,e.getDistanceFromLatLonInKm=function(e,t,n,o){const s=a(n-e),r=a(o-t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a(e))*Math.cos(a(n))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},Object.defineProperty(e,"__esModule",{value:!0})}));
